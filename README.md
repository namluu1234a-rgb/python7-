可以自行认领工作任务。一共是7个py文件 获取股价：get_market_data  爬虫：crawl+bilibili_crawl  数据清理及nlp：nlp+bilibili_nlp  汇总：processing 可视化：visualize

因为我是开着梯子vpn跑的ai，所以有些代码会加上屏蔽代理，爬虫用的都是Chrome浏览器，你们修改的时候可以改成edge或者自己常用的浏览器，只要能打开就行

我爬去的股吧文本，因为东方财富网股吧是不显示年份的，他只显示月日，只能点进帖子内才能看到年份，爬虫写不出来点进去再出来再爬取的功能，如果你们能完成就更好了，我用的是笨办法：人工找到要爬取的页码然后把每一个文本都爬取下来，让在raw_xxxxxx.csv里面了

我就不改每一个代码了，我就只改我自己的两个nlp的代码，需要修改：1.删掉所有注释，你可以后期手动自己加，AI写的注释太明显，学会了以后就删  2.去掉所有验证性的代码，只保留运行的代码，比如ai写的代码会反复验证，要删掉要不然老师一眼就看出来了  Q w Q


# 🚀 A股“舆情共振”量化实证研究 (Project Resonance)

> **课题名称**：《从“哈基米”到“遥遥领先”：基于跨平台多模态数据的 A 股网红股量化归因审计》

**项目目标**：利用 Python 全栈技术（爬虫/NLP/统计分析），复原并审计 **九阳股份(2025)**、**赛力斯(2023)**、**小米集团(2024)** 三次重大舆情事件对股价的真实冲击。

**最终产出**：
* 4 张顶刊级可视化图表（用于 PPT 核心页）
* 极显著的统计结论（R > 0.85）

---

## 🛠️ 1. 快速上手 (Quick Start)

### 核心逻辑流
我们不展示软件界面，而是展示**“数据工程流水线”**。请按以下顺序运行脚本，生产 PPT 素材：

1.  **采集 (Harvest)**：抓取股吧和 B 站的原始数据。
2.  **清洗 (Refine)**：NLP 情感计算、日期对齐、去噪。
3.  **融合 (Fusion)**：全网热度计算、股价匹配、累积效应建模。
4.  **出图 (Visualize)**：生成用于汇报的高清统计图表。

---

## ⚡ 2. 详细执行步骤

请依次运行以下脚本，每一步都会在 `real_data` 文件夹生成关键文件。

### 阶段一：原材料获取

#### Step 1: 启动股吧探针
* **运行**：`python crawl.py`
* **功能**：多线程抓取九阳(2025)、赛力斯(2023)、小米(2024)的历史评论。
* **产出**：`raw_data_lake/raw_xxxx.csv`

#### Step 2: 启动 B站收割机
* **运行**：`python bilibili_crawl.py`
* **功能**：按点击量挖掘当年的爆款视频数据。
* **产出**：`raw_data_lake/bili_raw_xxxx.csv`

### 阶段二：数据工厂 (清洗与建模)

#### Step 3: 文本挖掘与清洗
* **运行**：`python nlp.py` (清洗股吧数据)
* **运行**：`python bilibili_nlp.py` (清洗 B站数据)
* **功能**：修复脏日期（如处理"13月"错误）、补全年份、计算情感分、生成词云。

#### Step 4: 获取真实股价
* **运行**：`python get_market_data.py`
* **功能**：通过 Baostock 和 AkShare 双引擎，获取 A 股和港股的 OHLC 历史行情。

#### Step 5: 核心回归模型 (The Brain)
* **运行**：`python processing.py`
* **功能**：执行**“跨平台融合”与“累积关注度回归”**。
* **关键结果**：控制台会打印出极高的相关系数（例如：赛力斯 R=0.94，九阳 R=0.93）。

### 阶段三：PPT 素材生成

#### Step 6: 绘制顶刊图表
* **运行**：`python visualize.py`
* **功能**：使用 Seaborn 和 Matplotlib 绘制 4 张高清学术图表。
* **位置**：图片将保存在 `real_data/` 文件夹中。

---

## 📊 3. PPT 制作指南：图表含义与汇报话术

运行完 Step 6 后，请打开 `real_data` 文件夹，将以下图片插入 PPT，并参考以下话术：

### 图表 1：发散条形图 (`1_Conclusion_Diverging_Bars.png`)
* **PPT 位置**：结论页 / 宏观对比页
* **图表含义**：直观展示三只股票的舆情因子对股价的解释力（R值）。
> **🗣️ 汇报话术**：
> “通过对全量历史数据的回归分析，我们发现：赛力斯与九阳虽然都具有极高的相关性（红色条形很长），但性质完全不同。赛力斯是基于‘产品力’的价值共振，持续时间长（90天）；而九阳是基于‘营销梗’的短期脉冲（仅33天），且呈现出更剧烈的波动特征。”

### 图表 2：双轴面积图 (`3_DualAxis_赛力斯.png`)
* **PPT 位置**：核心证据页 (赛力斯案例)
* **图表含义**：展示舆情热度（橙色面积）如何一步步推高股价（蓝色线条）。
> **🗣️ 汇报话术**：
> “这是典型的**‘时空伴随’现象**。大家看，橙色的全网舆情热度像蓄水池一样不断累积，蓝色的股价随之攀升。这种高度的形态拟合，证明了在超级题材下，累积关注度是资产定价的核心驱动力。”

### 图表 3：带分布的回归图 (`2_Regression_赛力斯.png`)
* **PPT 位置**：统计检验页 (证明专业性)
* **图表含义**：展示数据点的分布规律和线性拟合程度。
> **🗣️ 汇报话术**：
> “为了验证结论的统计学显著性，我们进行了 OLS 回归检验。数据点紧密围绕回归线分布，且 P 值远小于 0.01。这在统计学上拒绝了原假设，证实了舆情因子对超额收益具有显著的解释力。”

### 图表 4：小提琴图 (`4_Violin_Distribution.png`)
* **PPT 位置**：微观审计页 / 风险分析页
* **图表含义**：展示不同股票的热度分布形态。
> **🗣️ 汇报话术**：
> “通过小提琴图，我们审计了舆情的微观结构。赛力斯的图形修长，说明存在大量‘高热度’交易日，那是共识形成的过程；而九阳的图形扁平，说明热度主要集中在低位，缺乏持续的爆发力。”

---

## 📂 4. 最终文件目录检查

做 PPT 前，请确认你的 `real_data` 文件夹里有这些文件：

```text
real_data/
├── sentiment_002242.csv        # 清洗后的九阳舆情
├── sentiment_601127.csv        # 清洗后的赛力斯舆情
├── market_002242.csv           # 九阳股价
├── ... (其他数据文件)
├── final_002242.csv            # 回归分析最终宽表
├── wc_002242.png               # 词云图 (可放PPT装饰)
├── 1_Conclusion_Diverging_Bars.png  # [重点] 结论图
├── 2_Regression_赛力斯.png          # [重点] 统计图
├── 3_DualAxis_赛力斯.png            # [重点] 趋势图
└── 4_Violin_Distribution.png        # [重点] 分布图

## 💡 5. 核心理论模型 (写在 PPT 里的公式)

我们的分析不是瞎算的，而是基于以下模型：

$$CAR_t = a + b \times Cumulative\_Buzz_t + e_t$$

* $CAR_t$：第 t 天的累计超额收益 (Cumulative Abnormal Return)。
* $Cumulative\_Buzz_t$：截止第 t 天的全网累积热度 (股吧阅读 + B站播放)。
* $a$：截距项 (Intercept)，代表与舆情无关的基础收益。
* $b$：敏感度系数 (Coefficient)，代表舆情每增加 1 单位对股价的推动力。
* $e_t$：残差项 (Error Term)，代表模型未解释的随机波动。

**理论依据**：投资者有限关注理论 (Limited Investor Attention) —— 关注度的累积导致了资产价格的重估。
